{% extends "base.html" %}

{% block title %}Session Complete - {{ deck.name }} - AI Flashcard Generator{% endblock %}

{% block content %}
<!-- Study session summary - shows performance and cards needing practice -->
<!-- For students: This page displays after completing a deck -->
<!-- It shows how many cards you got right, which ones need practice, and options to continue -->
<div class="max-w-4xl mx-auto">
    <!-- Congratulations header -->
    <div class="text-center mb-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-2">Great work! You've completed this deck.</h2>
        <p class="text-xl text-gray-600">{{ deck.name }}</p>
    </div>

    <!-- Statistics display in grid -->
    <!-- For students: md:grid-cols-2 means 2 columns on desktop, single column on mobile -->
    <div class="grid md:grid-cols-2 gap-6 mb-8">
        <!-- Total cards studied stat -->
        <div class="bg-white rounded-lg shadow border-l-4 border-blue-500 p-6">
            <div class="text-gray-600 text-sm font-semibold uppercase mb-1">Total Cards Studied</div>
            <div class="text-4xl font-bold text-gray-800">{{ total_cards }}</div>
        </div>

        <!-- Success rate stat -->
        <div class="bg-white rounded-lg shadow border-l-4 border-purple-500 p-6">
            <div class="text-gray-600 text-sm font-semibold uppercase mb-1">Success Rate</div>
            <div class="text-4xl font-bold text-gray-800">{{ success_rate }}%</div>
        </div>

        <!-- Cards marked "Got it!" -->
        <div class="bg-white rounded-lg shadow border-l-4 border-green-500 p-6">
            <div class="text-gray-600 text-sm font-semibold uppercase mb-1">Got it!</div>
            <div class="text-4xl font-bold text-green-600">{{ success_count }}</div>
        </div>

        <!-- Cards needing practice -->
        <div class="bg-white rounded-lg shadow border-l-4 border-yellow-500 p-6">
            <div class="text-gray-600 text-sm font-semibold uppercase mb-1">Needs Practice</div>
            <div class="text-4xl font-bold text-yellow-600">{{ needs_practice_count }}</div>
        </div>
    </div>

    <!-- Cards needing practice list (conditional) -->
    <!-- For students: This section only appears if you marked some cards as "Needs Practice" -->
    {% if needs_practice_count > 0 %}
    <div class="bg-white rounded-lg shadow p-6 mb-8">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Cards to review:</h3>
        <ul class="space-y-2">
            {% for question in practice_questions %}
            <!-- For students: Each question is a small list item for easy reference -->
            <li class="text-gray-700 border-l-4 border-yellow-500 pl-4 py-2">
                {{ question }}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% else %}
    <!-- Perfect score celebration -->
    <!-- For students: This celebratory message appears when you get everything right -->
    <div class="bg-gradient-to-r from-green-400 to-green-600 rounded-lg shadow-xl p-8 mb-8 text-center">
        <p class="text-3xl font-bold text-white mb-2">Perfect score! You got everything right! ðŸŽ‰</p>
        <p class="text-white text-lg">Excellent work mastering this deck!</p>
    </div>
    {% endif %}

    <!-- Action buttons -->
    <!-- For students: Two options after completing the session -->
    <div class="flex flex-col sm:flex-row gap-4">
        <!-- Study Again button - restart this deck -->
        <a href="/study/{{ deck.id }}"
           class="flex-1 bg-green-600 text-white py-4 px-6 rounded-md hover:bg-green-700 transition-colors font-bold text-lg text-center">
            Study Again
        </a>

        <!-- Back to My Decks button - return to deck selection -->
        <a href="/decks"
           class="flex-1 bg-gray-600 text-white py-4 px-6 rounded-md hover:bg-gray-700 transition-colors font-bold text-lg text-center">
            Back to My Decks
        </a>
    </div>
</div>
{% endblock %}
