---
phase: 04-study-mode-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/templates/decks.html, src/routes/main.py]
autonomous: true
---

<objective>
Create deck selection page showing all saved flashcard decks.

Purpose: Users need to choose which deck to study before entering study mode. This provides the entry point to the study experience.
Output: Working deck selection page with links to study each deck.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context
@.planning/phases/03-card-generation-ui/03-01-SUMMARY.md

# Source files to understand
@src/templates/base.html
@src/templates/preview.html
@src/routes/main.py
@src/models/deck.py
@src/models/flashcard.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create deck selection template</name>
  <files>src/templates/decks.html</files>
  <action>
Create decks.html template extending base.html. Display:
- Page title: "Your Decks"
- Grid/list of all decks from database with:
  - Deck name
  - Flashcard count (from Flashcard.get_by_deck)
  - "Study Now" button linking to /study/{deck_id}
  - Created date formatted as human-readable
- Empty state message: "No decks yet. Generate your first deck!" with link to /
- Use Tailwind CSS classes matching existing templates (cards with border-l-4 border-blue-500, like preview.html)

Follow template inheritance pattern from preview.html:
- Extend base.html with {% extends "base.html" %}
- Use {% block title %} for page title
- Use {% block content %} for main content
- Add educational comments for students (like existing templates)
  </action>
  <verify>
Template file exists and renders without Jinja2 syntax errors.
HTML structure follows existing pattern (max-w-4xl mx-auto, grid gap-4).
  </verify>
  <done>
decks.html template created with deck list display, card count, study links, and empty state.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add /decks route to load and display all decks</name>
  <files>src/routes/main.py</files>
  <action>
Add new route in src/routes/main.py for deck selection:
- Route: @main.route('/decks')
- Function name: decks()
- Query all decks using Deck.get_all() (this method already exists - check deck.py)
- For each deck, get flashcard count using Flashcard.get_by_deck(deck_id)
- Pass decks list with counts to template
- Render: render_template('decks.html', decks=decks_with_counts)
- Add docstring explaining purpose: "Display all saved decks for user to select which one to study"
- Add educational comments for students (as in existing routes)

Format:
```python
decks_with_counts = []
for deck in decks:
    count = len(Flashcard.get_by_deck(deck['id']))
    decks_with_counts.append({**deck, 'card_count': count})
```
  </action>
  <verify>
Run Flask app, visit http://localhost:5001/decks - page renders showing list of decks.
If no decks exist, shows empty state message.
  </verify>
  <done>
/decks route implemented showing all decks with flashcard counts.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update navigation to include link to decks page</name>
  <files>src/templates/base.html</files>
  <action>
Add navigation link to base.html header for easy access to decks:
- In the header section (where "AI Flashcard Generator" title is), add a navigation link: "My Decks" → /decks
- Place it prominently so users can easily find their saved decks
- Use Tailwind classes for styling: text-white hover:text-gray-200
- Keep the header clean and simple (just title and one nav link for now)

Example structure:
```html
<header class="bg-blue-600 text-white p-4">
  <div class="max-w-4xl mx-auto flex justify-between items-center">
    <h1>...</h1>
    <a href="/decks" class="...">My Decks</a>
  </div>
</header>
```
  </action>
  <verify>
Visit any page (/, /preview/{id}, /decks) - header shows "My Decks" link. Click link → navigates to /decks.
  </verify>
  <done>
base.html header includes navigation link to /decks page.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Flask app runs without errors
- [ ] Visit /decks → shows list of decks (or empty state if none)
- [ ] Each deck card shows: name, card count, "Study Now" button
- [ ] "My Decks" link visible in header on all pages
- [ ] Clicking "Study Now" button goes to /study/{deck_id} (route doesn't exist yet, that's ok - will be created in next plan)
</verification>

<success_criteria>

- All tasks completed
- /decks route renders deck selection page
- decks.html template follows existing design patterns
- Navigation link added to header
- No errors or warnings introduced
- Educational comments present for student learning
  </success_criteria>

<output>
After completion, create `.planning/phases/04-study-mode-ui/04-01-SUMMARY.md`
</output>
